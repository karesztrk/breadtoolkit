---
import Layout from "@layouts/Layout.astro";
---

<Layout>
  <hgroup>
    <h1>Calculator</h1>
    <p>Calculate your dough hydration and the amount of ingredients.</p>
  </hgroup>

  <article>

    <calculator-form $input="onChange">
      <dl>
        <dt>Dough weights</dt>
        <dd id="weight" data-unit="gram">...</dd>

        <dt>Hydration</dt>
        <dd id="hydration" data-unit="%">...</dd>
      </dl>

      <form aria-labelledby="form-heading">

        <calculator-form-group $input="onInput">
          <label for="flour">Flour</label>
          <input type="number" id="flour" name="flour" value="0" inputmode="decimal" min="0" required>
        </calculator-form-group>

        <calculator-form-group $input="onInput">
          <label for="water">Water</label>
          <input type="number" id="water" name="water" value="0" inputmode="decimal" step="any" min="0" required>
        </calculator-form-group>

        <calculator-form-group $input="onInput">
          <label for="salt">Salt</label>
          <input type="number" id="salt" name="salt" value="0" inputmode="decimal" step="any" min="0" required>
        </calculator-form-group>


          <calculator-form-group $input="onInput">
            <label for="sourdough">Sourdough</label>
            <input type="number" id="sourdough" name="sourdough" value="0" inputmode="decimal" step="any" min="0" required>
          </calculator-form-group>

          <div>
            <label>Sourdough ratio</label>
            <input type="range" value="0" min="0" max="100" id="sourdough_ratio" name="sourdough_ratio" required />
          </div>

      </form>
    </calculator-form>
  </article>
</Layout>


<script>
  import "@components/calculator/CalculatorForm";
  import "@components/calculator/CalculatorFormGroup";
</script>

<style>

dd {
  &:after{
    content: ' ' attr(data-unit);
  }

  margin: auto;
}

input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
    appearance: none;
}

input[type='number'] {
  -moz-appearance: textfield;
}

calculator-form-group {
  display: block;
}

calculator-form > * + * {
  margin-block-start: var(--flow-space, 1em); 
}
</style>
